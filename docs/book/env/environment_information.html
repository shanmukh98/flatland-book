
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Environment information</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/custom.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Custom observations" href="custom_observations.html" />
    <link rel="prev" title="Level Generation" href="level_generation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/flatland-logo.svg" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome to Flatland
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../getting-started/installation.html">
   Installing Flatland
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../getting-started/env.html">
   Flatland Environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../getting-started/The_Rail_Environment.html">
   Using
   <code class="docutils literal notranslate">
    <span class="pre">
     RailEnv
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../getting-started/sequential-agent.html">
   Sequential Agent
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Environment
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="observations.html">
   Provided Observations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="level_generation.html">
   Level Generation
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Environment information
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="custom_observations.html">
   Custom observations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="speed_profiles.html">
   Speed profiles
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="updates.html">
   Updates
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="updates/Agent-Close-Following.html">
     Unordered Close Following
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://flatlandrl-docs.aicrowd.com/flatland.html">
   API Reference
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../tuts/or.html">
   Operations Research
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../tuts/rl.html">
   Reinforcement Learning
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../tuts/rl/single-agent.html">
     Single agent
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../tuts/rl/multi-agent.html">
     Multiple Agents
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Challenges
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../challenges/amld2021.html">
   AMLD 2021
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/amld2021/envconfig.html">
     Environment Configurations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/amld2021/eval.html">
     Evaluation Metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/amld2021/first-submission.html">
     Making a Submission
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../challenges/neurips2020-challenge.html">
   Neurips 2020
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/neurips2020/envconfig.html">
     Environment Configurations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/neurips2020/eval.html">
     Evaluation Metrics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/neurips2020/first-submission.html">
     Making a Submission
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../challenges/neurips2020/faq.html">
     FAQs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../challenges/halloffame.html">
   Hall of Fame
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Research
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../research/baselines.html">
   RLlib Baselines
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../research/baselines/getting-started.html">
     Getting started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../research/baselines/centralized_critic.html">
     Centralized Critic PPO
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../research/baselines/imitation_learning.html">
     Imitation Learning Training
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../research/baselines/global_density_obs.html">
     Global Density Observation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../research/baselines/combined_tree_local_conflict_obs.html">
     Combined Observation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../research/baselines/action_masking_and_skipping.html">
     Frame skipping and action masking
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../research/research-ideas.html">
   Research Ideas
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  FAQ
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../faq/env.html">
   Flatland Environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../faq/research.html">
   Flatland Research
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Miscellaneous
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/external-resources.html">
   Community Projects
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../misc/contributing.html">
   Contributing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../misc/contributing-code.html">
     Writing code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../misc/contributing-doc.html">
     Writing documentation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../misc/credits.html">
   Credits
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/book/env/environment_information.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transitions-maps">
   Transitions maps
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-transitions">
     get_transitions()
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#get-full-transitions">
     get_full_transitions()
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#agent-information">
   Agent information
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#agent-basic-information">
     Agent basic information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#agent-malfunction-information">
     Agent malfunction information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#agent-speed-information">
     Agent speed information
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="environment-information">
<h1>Environment information<a class="headerlink" href="#environment-information" title="Permalink to this headline">¶</a></h1>
<p>When building your custom observation builder, you might want to aggregate and define your own features that are different from the raw environment data. In this section we introduce how such information can be accessed and how you can build your own features out of them.</p>
<div class="section" id="transitions-maps">
<h2>Transitions maps<a class="headerlink" href="#transitions-maps" title="Permalink to this headline">¶</a></h2>
<p>The transition maps build the base for all movements in the environment. They contain all the information about allowed transitions for the agent at any given position. Because railway movement is limited to the railway tracks, these are important features for any controller that wants to interact with the environment.</p>
<div class="admonition-code-reference admonition">
<p class="admonition-title">Code reference</p>
<p>All functionality and features of transition maps can be found in <a class="reference external" href="https://gitlab.aicrowd.com/flatland/flatland/blob/master/flatland/core/transition_map.py">core/transition_map.py</a>.</p>
</div>
<p>There are two different possibilities to access the possible transitions at any given cell:</p>
<div class="section" id="get-transitions">
<h3>get_transitions()<a class="headerlink" href="#get-transitions" title="Permalink to this headline">¶</a></h3>
<p>Provide a cell position and an orientation (usually the orientation of the agent) and call <code class="docutils literal notranslate"><span class="pre">env.rail.get_transitions(*position,</span> <span class="pre">direction)</span></code>. In return, you get will a 4D vector with the transition probability ordered as [North, East, South, West] given the initial orientation.</p>
<p>The position is a tuple of the form <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> where <span class="math notranslate nohighlight">\(x \in [0, h]\)</span> and <span class="math notranslate nohighlight">\(y \in [0, w]\)</span> with <span class="math notranslate nohighlight">\(h\)</span> and <span class="math notranslate nohighlight">\(w\)</span> the height and width of the environment. This can be used for branching in a tree search and when looking for all possible allowed paths of an agent as it will provide a simple way to get the possible trajectories.</p>
</div>
<div class="section" id="get-full-transitions">
<h3>get_full_transitions()<a class="headerlink" href="#get-full-transitions" title="Permalink to this headline">¶</a></h3>
<p>When more detailed information about the cell is necessary, you can also get the <strong>full</strong> transitions of a cell by calling <code class="docutils literal notranslate"><span class="pre">env.rail.get_full_transitions(*position)</span></code>. This will return an <code class="docutils literal notranslate"><span class="pre">int16</span></code> for the cell representing the allowed transitions.</p>
<p>To understand the transitions returned it is best to represent it as a binary number <code class="docutils literal notranslate"><span class="pre">bin(transition_int)</span></code>, where the bits have to following meaning: NN NE NS NW EN EE ES EW SN SE SS SW WN WE WS WW.</p>
<p>For example, the binary code 1000 0000 0010 0000, represents a straight where an agent facing north can transition north and an agent facing south can transition south and no other transitions are possible.</p>
<p>To get a better feeling of what the binary representations of the elements look like, check the special cases of <code class="docutils literal notranslate"><span class="pre">GridTransitions</span></code> in <a class="reference external" href="https://gitlab.aicrowd.com/flatland/flatland/blob/master/flatland/core/grid/rail_env_grid.py#L28"><code class="docutils literal notranslate"><span class="pre">RailEnvTransitions</span></code></a>. They are the set of transitions mimicking the types of real Swiss rail connections:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">transition_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="s1">&#39;0000000000000000&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># empty cell - Case 0</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1000000000100000&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 1 - straight</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1001001000100000&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 2 - simple switch</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1000010000100001&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 3 - diamond drossing</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1001011000100001&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 4 - single slip</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1100110000110011&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 5 - double slip</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;0101001000000010&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 6 - symmetrical</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;0010000000000000&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 7 - dead end</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;0100000000000010&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 1b (8)  - simple turn right</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;0001001000000000&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># Case 1c (9)  - simple turn left</span>
                   <span class="nb">int</span><span class="p">(</span><span class="s1">&#39;1100000000100010&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>  <span class="c1"># Case 2b (10) - simple switch mirrored</span>
</pre></div>
</div>
<p>These two objects can be used for example to detect switches that are usable by other agents, but not the observing agent itself. This can be an important feature when actions have to be taken in order to avoid conflicts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cell_transitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">rail</span><span class="o">.</span><span class="n">get_transitions</span><span class="p">(</span><span class="o">*</span><span class="n">position</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
<span class="n">transition_bit</span> <span class="o">=</span> <span class="nb">bin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">rail</span><span class="o">.</span><span class="n">get_full_transitions</span><span class="p">(</span><span class="o">*</span><span class="n">position</span><span class="p">))</span>

<span class="n">total_transitions</span> <span class="o">=</span> <span class="n">transition_bit</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
<span class="n">num_transitions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">count_nonzero</span><span class="p">(</span><span class="n">cell_transitions</span><span class="p">)</span>

<span class="c1"># Detect Switches that can only be used by other agents.</span>
<span class="k">if</span> <span class="n">total_transitions</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="n">num_transitions</span><span class="p">:</span>
    <span class="n">unusable_switch_detected</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="agent-information">
<h2>Agent information<a class="headerlink" href="#agent-information" title="Permalink to this headline">¶</a></h2>
<p>The agents are represented as an agent class and are provided when the environment is instantiated. Because agents can have different properties it is helpful to know how to access this information.</p>
<p>You can simply access the three main types of agent information in the following ways <code class="docutils literal notranslate"><span class="pre">agent</span> <span class="pre">=</span> <span class="pre">env.agents[handle]</span></code></p>
<div class="section" id="agent-basic-information">
<h3>Agent basic information<a class="headerlink" href="#agent-basic-information" title="Permalink to this headline">¶</a></h3>
<p>All the agent in the initiated environment can be found in the env.agents class. Given the index of the agent you have access to:</p>
<ul class="simple">
<li><p><strong>Agent position:</strong> <code class="docutils literal notranslate"><span class="pre">agent.position</span></code> which returns the current coordinates (x, y) of the agent.</p></li>
<li><p><strong>Agent target:</strong> <code class="docutils literal notranslate"><span class="pre">agent.target</span></code> which returns the target coordinates (x, y).</p></li>
<li><p><strong>Agent direction:</strong> <code class="docutils literal notranslate"><span class="pre">agent.direction</span></code> which is an int representing the current orientation {0: North, 1: East, 2: South, 3: West}</p></li>
<li><p><strong>Agent moving:</strong> <code class="docutils literal notranslate"><span class="pre">agent.moving</span></code> where 0 means the agent is currently not moving and 1 indicates agent is moving.</p></li>
</ul>
</div>
<div class="section" id="agent-malfunction-information">
<h3>Agent malfunction information<a class="headerlink" href="#agent-malfunction-information" title="Permalink to this headline">¶</a></h3>
<p>Similar to the speed data you can also access individual data about the
malfunctions of an agent. All data is available through
agent.malfunction_data with:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">malfunction</span></code>:</strong> Indication how long the agent is still malfunctioning by an integer counting down at each time step. <code class="docutils literal notranslate"><span class="pre">0</span></code> means the agent is ok and can move.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">malfunction_rate</span></code>:</strong> Poisson rate at which malfunctions happen for this agent</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">next_malfunction</span></code>:</strong> Number of steps until next malfunction will occur</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">nr_malfunctions</span></code>:</strong> Number of malfunctions an agent have occurred for this agent so far</p></li>
</ul>
</div>
<div class="section" id="agent-speed-information">
<h3>Agent speed information<a class="headerlink" href="#agent-speed-information" title="Permalink to this headline">¶</a></h3>
<!-- ```{note}
Speed profiles are not used in the first round of the NeurIPS 2020 challenge.
``` -->
<p>Beyond the basic agent information we can also access more details about
the agents type by looking at speed data:</p>
<ul class="simple">
<li><p><strong>Agent max speed:</strong> agent.speed_data[“speed”] wich defines the traveling speed when the agent is moving.</p></li>
<li><p><strong>Agent position fraction:</strong> <code class="docutils literal notranslate"><span class="pre">agent.speed_data[&quot;position_fraction&quot;]</span></code> which is a number between 0 and 1 and indicates when the move to the next cell will occur. Each speed of an agent is 1 or a smaller fraction. At each env.step() the agent moves at its fractional speed forwards and only changes to the next cell when the cumulated fractions are <code class="docutils literal notranslate"><span class="pre">agent.speed_data[&quot;position_fraction&quot;]</span> <span class="pre">&gt;=</span> <span class="pre">1</span></code>.</p></li>
<li><p>Agent can move at different speed which can be set up by modifying the agent.speed_data within the schedule_generator.</p></li>
</ul>
</div>
</div>
</div>


              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="level_generation.html" title="previous page">Level Generation</a>
    <a class='right-next' id="next-link" href="custom_observations.html" title="next page">Custom observations</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Flatland Community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-132885496-4', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>